<!DOCTYPE html>
<html>
<head>
 <meta charset="utf-8">
 <meta name="viewport" content="width=device-width, initial-scale=1">
 <title>UserManager - Bienvenido</title>
 <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
 <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
 <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
 <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
 <script src="https://accounts.google.com/gsi/client" async defer></script>
 <script src="modelo.js"></script>
 <script src="clienteRest.js"></script>
 <script src="controlWeb.js"></script>
 <style>
  body {
   background: linear-gradient(135deg, #4a90e2 0%, #67b5e8 50%, #85c9f2 100%) !important;
   margin: 0;
   padding: 0;
   min-height: 100vh;
  }
  .container {
   background-color: transparent;
  }
  .hero-section {
   background: linear-gradient(135deg, #4a90e2 0%, #67b5e8 100%);
   color: white;
   padding: 100px 0;
   min-height: 80vh;
   display: flex;
   align-items: center;
   position: relative;
  }
  .hero-section::before {
   content: '';
   position: absolute;
   top: 0;
   left: 0;
   right: 0;
   bottom: 0;
   background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23ffffff" fill-opacity="0.1" d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,122.7C672,117,768,139,864,138.7C960,139,1056,117,1152,101.3C1248,85,1344,75,1392,69.3L1440,64L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>') bottom center no-repeat;
   background-size: cover;
   opacity: 0.3;
  }
  .hero-section h1 {
   color: #ffffff;
   text-shadow: 2px 2px 8px rgba(0,0,0,0.2);
   font-weight: 700;
  }
  .hero-section p {
   color: #ffffff;
   font-size: 1.2rem;
   text-shadow: 1px 1px 4px rgba(0,0,0,0.1);
  }
  .feature-icon {
   font-size: 3rem;
   color: #ff9800;
   margin-bottom: 1rem;
   text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
  }
  .btn-custom {
   padding: 15px 45px;
   font-size: 1.1rem;
   border-radius: 50px;
   margin: 10px;
   font-weight: 600;
   transition: all 0.3s ease;
   text-transform: uppercase;
   letter-spacing: 0.5px;
  }
  .btn-custom.btn-light {
   background: linear-gradient(135deg, #ff9800 0%, #ff6b35 100%);
   color: white;
   border: none;
   box-shadow: 0 4px 15px rgba(255, 152, 0, 0.4);
  }
  .btn-custom.btn-light:hover {
   background: linear-gradient(135deg, #ffa726 0%, #ff7043 100%);
   transform: translateY(-3px);
   box-shadow: 0 6px 25px rgba(255, 152, 0, 0.6);
   color: white;
  }
  .btn-custom.btn-outline-light {
   background: rgba(255, 255, 255, 0.2);
   color: white;
   border: 3px solid white;
   backdrop-filter: blur(10px);
  }
  .btn-custom.btn-outline-light:hover {
   background: white;
   color: #4a90e2;
   border: 3px solid white;
   transform: translateY(-3px);
   box-shadow: 0 6px 25px rgba(255, 255, 255, 0.5);
  }
  .google-btn {
   background: white;
   color: #333;
   border: 2px solid #ddd;
  }
  .google-btn:hover {
   background: #f8f9fa;
   color: #333;
  }
  .card-login {
   border-radius: 20px;
   box-shadow: 0 10px 40px rgba(74, 144, 226, 0.2);
   background: white;
   border: 2px solid #e3f2fd;
  }
  .card {
   background: white !important;
   border: 2px solid #e3f2fd;
   border-radius: 15px;
   transition: all 0.3s ease;
  }
  .card:hover {
   transform: translateY(-5px);
   box-shadow: 0 8px 25px rgba(74, 144, 226, 0.3);
   border-color: #4a90e2;
  }
  #dashboard {
   background: linear-gradient(to bottom, #e3f2fd 0%, #f5f9ff 100%) !important;
   min-height: 100vh;
   padding-bottom: 50px;
  }
  .btn-primary, .btn-dark {
   background: linear-gradient(135deg, #ff9800 0%, #ff6b35 100%) !important;
   border: none !important;
   color: white !important;
   font-weight: 600;
   transition: all 0.3s ease;
   box-shadow: 0 4px 15px rgba(255, 152, 0, 0.4);
  }
  .btn-primary:hover, .btn-dark:hover {
   background: linear-gradient(135deg, #ffa726 0%, #ff7043 100%) !important;
   transform: translateY(-2px);
   box-shadow: 0 6px 20px rgba(255, 152, 0, 0.6);
   color: white !important;
  }
  .btn-outline-dark {
   border-color: #ff9800 !important;
   color: #ff9800 !important;
   font-weight: 600;
   transition: all 0.3s ease;
  }
  .btn-outline-dark:hover {
   background: linear-gradient(135deg, #ff9800 0%, #ff6b35 100%) !important;
   color: white !important;
   border-color: #ff9800 !important;
   transform: translateY(-2px);
  }
  .btn-success {
   background: linear-gradient(135deg, #ff9800 0%, #ff6b35 100%) !important;
   border: none !important;
   color: white !important;
   font-weight: 600;
   transition: all 0.3s ease;
   box-shadow: 0 4px 15px rgba(255, 152, 0, 0.4);
  }
  .btn-success:hover {
   background: linear-gradient(135deg, #ffa726 0%, #ff7043 100%) !important;
   transform: translateY(-2px);
   box-shadow: 0 6px 20px rgba(255, 152, 0, 0.6);
   color: white !important;
  }
  .btn-outline-danger {
   transition: all 0.3s ease;
  }
  .btn-outline-danger:hover {
   transform: translateY(-2px);
  }
 </style>
 <script>
 $(document).ready(function(){
   const urlParams = new URLSearchParams(window.location.search);
   if (urlParams.get('elegirNick') === 'true') {
     $('#modalNickGoogle').modal('show');
   }
 });
 </script>
</head>
<body>

<!-- Google One Tap configuration -->
<div
 id="g_id_onload"
 data-client_id="YOUR_GOOGLE_CLIENT_ID"
 data-login_uri="https://procesos2526-145905119803.europe-west1.run.app/oneTap/callback"
 data-skip_prompt_cookie="nick"
></div>


<nav class="navbar navbar-expand-lg navbar-dark" style="background: linear-gradient(135deg, #4a90e2 0%, #357abd 100%); box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
 <div class="container">
  <a class="navbar-brand font-weight-bold" href="#" style="font-size: 1.5rem;">
   <img src="img/logo.png" alt="Logo" style="height: 35px; margin-right: 10px;"> UserManager
  </a>
  <button class="btn btn-light btn-sm ml-auto" onclick="cw.salir()" id="btnSalir" style="display: none;">
   <i class="fas fa-sign-out-alt"></i> Salir
  </button>
 </div>
</nav>


<div id="landingPage" style="display: none;">
 <section class="hero-section">
  <div class="container">
   <div class="row align-items-center">
    <div class="col-lg-6 text-center text-lg-left mb-5 mb-lg-0">
     <h1 class="display-3 font-weight-bold mb-4">¡Bienvenido a UserManager!</h1>
     <p class="lead mb-5">La plataforma más completa y segura para gestionar usuarios. Accede de forma rápida y sencilla con tu cuenta.</p>
     <div class="d-flex flex-column flex-md-row justify-content-center justify-content-lg-start">
      <button class="btn btn-light btn-custom" onclick="cw.mostrarLoginForm()">
       <i class="fas fa-sign-in-alt"></i> Iniciar Sesión
      </button>
      <button class="btn btn-outline-light btn-custom" onclick="cw.mostrarRegistroForm()">
       <i class="fas fa-user-plus"></i> Registrarse
      </button>
     </div>
    </div>
    <div class="col-lg-6">
     <div class="text-center">
      <img src="img/PaginaPrincipal.png" alt="UserManager" style="max-width: 100%; height: auto; max-height: 500px;">
     </div>
    </div>
   </div>
  </div>
 </section>

 <!-- Login Form Modal -->
 <div id="loginFormSection" style="display: none; padding: 60px 0; background: #f8f9fa;">
  <div class="container">
   <div class="row justify-content-center">
    <div class="col-md-6 col-lg-5">
     <div class="card card-login">
      <div class="card-body p-5">
       <h3 class="text-center mb-4"><i class="fas fa-sign-in-alt"></i> Iniciar Sesión</h3>
       <div id="mensajeLogin" class="alert" style="display: none;"></div>
       <form id="formLogin">
        <div class="form-group">
         <label for="emailLogin"><i class="fas fa-envelope"></i> Email:</label>
         <input type="email" class="form-control" id="emailLogin" placeholder="tu@email.com" required>
        </div>
        <div class="form-group">
         <label for="passwordLogin"><i class="fas fa-key"></i> Contraseña:</label>
         <input type="password" class="form-control" id="passwordLogin" placeholder="••••••••" required>
        </div>
        <button type="submit" class="btn btn-primary btn-block btn-lg">Iniciar Sesión</button>
       </form>
       <hr>
       <p class="text-center mb-3">O inicia sesión con:</p>
       <a href="/auth/google" class="btn btn-light btn-block google-btn">
        <i class="fab fa-google"></i> Continuar con Google
       </a>
       <div class="text-center mt-3">
        <small>¿No tienes cuenta? <a href="#" onclick="cw.mostrarRegistroForm(); return false;" class="font-weight-bold">Regístrate aquí</a></small>
       </div>
       <div class="text-center mt-2">
        <button class="btn btn-link" onclick="cw.volverLanding()">
         <i class="fas fa-arrow-left"></i> Volver
        </button>
       </div>
      </div>
     </div>
    </div>
   </div>
  </div>
 </div>

 <div id="registroFormSection" style="display: none; padding: 60px 0; background: #f8f9fa;">
  <div class="container">
   <div class="row justify-content-center">
    <div class="col-md-6 col-lg-5">
     <div class="card card-login">
      <div class="card-body p-5">
       <h3 class="text-center mb-4"><i class="fas fa-user-plus"></i> Crear Cuenta</h3>
       <div id="mensajeRegistro" class="alert" style="display: none;"></div>
       <form id="formRegistro">
        <div class="form-group">
         <label for="nickRegistro"><i class="fas fa-user"></i> Nick (Usuario):</label>
         <input type="text" class="form-control" id="nickRegistro" placeholder="Elige tu nick único" required>
         <small class="form-text text-muted">3-20 caracteres: letras, números y guiones bajos</small>
        </div>
        <div class="form-group">
         <label for="emailRegistro"><i class="fas fa-envelope"></i> Email:</label>
         <input type="email" class="form-control" id="emailRegistro" placeholder="tu@email.com" required>
        </div>
        <div class="form-group">
         <label for="passwordRegistro"><i class="fas fa-key"></i> Contraseña:</label>
         <input type="password" class="form-control" id="passwordRegistro" placeholder="Mínimo 6 caracteres" required>
        </div>
        <button type="submit" class="btn btn-success btn-block btn-lg">Crear Cuenta</button>
       </form>
       <hr>
       <p class="text-center mb-3">O regístrate con:</p>
       <a href="/auth/google" class="btn btn-light btn-block google-btn">
        <i class="fab fa-google"></i> Continuar con Google
       </a>
       <div class="text-center mt-3">
        <small>¿Ya tienes cuenta? <a href="#" onclick="cw.mostrarLoginForm(); return false;" class="font-weight-bold">Inicia sesión aquí</a></small>
       </div>
       <div class="text-center mt-2">
        <button class="btn btn-link" onclick="cw.volverLanding()">
         <i class="fas fa-arrow-left"></i> Volver
        </button>
       </div>
      </div>
     </div>
    </div>
   </div>
  </div>
 </div>
</div>

<!-- Dashboard - Visible solo con sesión -->
<div id="dashboard" style="display: none;">
 <div class="container mt-4">
  <!-- Welcome Message -->
  <div id="welcomeMessage"></div>

  <!-- Header section -->
  <div class="row mb-4">
   <div class="col-12">
    <h2 class="text-dark mb-1">Panel de Control</h2>
    <p class="text-muted">Gestione usuarios de forma eficiente con nuestras herramientas</p>
   </div>
  </div>

  <!-- Cards para cada función -->
  <div class="row">
  <!-- Agregar Usuario -->
  <div class="col-md-6 col-lg-4 mb-4">
   <div class="card h-100 shadow-sm">
    <div class="card-body">
     <h5 class="card-title">Agregar Usuario</h5>
     <p class="card-text text-muted small">Registre un nuevo usuario en el sistema</p>
     <button type="button" class="btn btn-outline-dark btn-sm" onclick="mostrarFuncion('agregarUsuario', this)">
      Mostrar
     </button>
     <div id="result-agregarUsuario" class="mt-3"></div>
    </div>
   </div>
  </div>

  
  <div class="col-md-6 col-lg-4 mb-4">
   <div class="card h-100 shadow-sm">
    <div class="card-body">
     <h5 class="card-title">Ver Usuarios</h5>
     <p class="card-text text-muted small">Consulte la lista completa de usuarios</p>
     <button type="button" class="btn btn-outline-dark btn-sm" onclick="mostrarFuncion('obtenerUsuarios', this)">
      Consultar
     </button>
     <div id="result-obtenerUsuarios" class="mt-3"></div>
    </div>
   </div>
  </div>

  <!-- Contar Usuarios -->
  <div class="col-md-6 col-lg-4 mb-4">
   <div class="card h-100 shadow-sm">
    <div class="card-body">
     <h5 class="card-title">Total Usuarios</h5>
     <p class="card-text text-muted small">Obtenga el número total de usuarios registrados</p>
     <button type="button" class="btn btn-outline-dark btn-sm" onclick="mostrarFuncion('numeroUsuarios', this)">
      Contar
     </button>
     <div id="result-numeroUsuarios" class="mt-3"></div>
    </div>
   </div>
  </div>

  <div class="col-md-6 col-lg-4 mb-4">
   <div class="card h-100 shadow-sm">
    <div class="card-body">
     <h5 class="card-title">Verificar Usuario</h5>
     <p class="card-text text-muted small">Compruebe si un usuario está activo</p>
     <button type="button" class="btn btn-outline-dark btn-sm" onclick="mostrarFuncion('usuarioActivo', this)">
      Verificar
     </button>
     <div id="result-usuarioActivo" class="mt-3"></div>
    </div>
   </div>
  </div>

  
  <div class="col-md-6 col-lg-4 mb-4">
   <div class="card h-100 shadow-sm">
    <div class="card-body">
     <h5 class="card-title">Eliminar Usuario</h5>
     <p class="card-text text-muted small">Elimine un usuario del sistema</p>
     <button type="button" class="btn btn-outline-dark btn-sm" onclick="mostrarFuncion('eliminarUsuario', this)">
      Eliminar
     </button>
     <div id="result-eliminarUsuario" class="mt-3"></div>
    </div>
   </div>
  </div>
 </div>

 <!-- Área de trabajo oculta -->
 <div id="au" style="display: none;"></div>
 <div id="registro"></div>
 <div id="msg"></div>
 <div id="contenido" style="display: none;"></div>
 </div>
</div>

<!-- Modal para elegir nick de Google -->
<div class="modal fade" id="modalNickGoogle" tabindex="-1" role="dialog">
 <div class="modal-dialog modal-dialog-centered" role="document">
  <div class="modal-content">
   <div class="modal-header">
    <h5 class="modal-title"><i class="fas fa-user-tag"></i> Elige tu Nick</h5>
   </div>
   <div class="modal-body">
    <p>Para completar tu registro con Google, por favor elige un nick único:</p>
    <div id="mensajeNickGoogle" class="alert" style="display: none;"></div>
    <div class="form-group">
     <label for="nickGoogle">Nick:</label>
     <input type="text" class="form-control" id="nickGoogle" placeholder="Tu nick único">
     <small class="form-text text-muted">3-20 caracteres: letras, números y guiones bajos</small>
    </div>
   </div>
   <div class="modal-footer">
    <button type="button" class="btn btn-primary" id="btnGuardarNickGoogle">Guardar</button>
   </div>
  </div>
 </div>
</div>

<script>
rest=new ClienteRest();
cw=new ControlWeb();

// Inicializar Google Sign-In
window.onload = function() {
	// Comprobar sesión al cargar la página
	cw.comprobarSesion();
	
	// Inicializar Google Identity Services
	if (window.google) {
		google.accounts.id.initialize({
			client_id: process.env.GOOGLE_CLIENT_ID || "YOUR_GOOGLE_CLIENT_ID",
			callback: function(response) {
				// Este callback se maneja en el servidor con las rutas configuradas
				console.log("Google login iniciado");
			}
		});
	}
};

// Función para mostrar componentes en las cards
function mostrarFuncion(funcion, boton) {
    // Limpiar todos los resultados
    $('[id^="result-"]').empty();
    
    // Obtener el div de resultado específico
    const resultDiv = $('#result-' + funcion);
    
    // Cambiar el texto del botón temporalmente
    const originalText = $(boton).text();
    $(boton).text('Cargando...').prop('disabled', true);
    
    switch(funcion) {
        case 'agregarUsuario':
            mostrarAgregarUsuarioEnCard(resultDiv, boton, originalText);
            break;
        case 'obtenerUsuarios':
            mostrarObtenerUsuariosEnCard(resultDiv, boton, originalText);
            break;
        case 'numeroUsuarios':
            mostrarNumeroUsuariosEnCard(resultDiv, boton, originalText);
            break;
        case 'usuarioActivo':
            mostrarUsuarioActivoEnCard(resultDiv, boton, originalText);
            break;
        case 'eliminarUsuario':
            mostrarEliminarUsuarioEnCard(resultDiv, boton, originalText);
            break;
    }
}

function mostrarAgregarUsuarioEnCard(resultDiv, boton, originalText) {
    const form = `
        <div class="border-top pt-3">
            <div class="form-group mb-2">
                <input type="text" class="form-control form-control-sm" id="nickAgregar" placeholder="Ingrese el nick">
            </div>
            <button class="btn btn-dark btn-sm btn-block" onclick="ejecutarAgregarUsuario()">Agregar</button>
        </div>
    `;
    resultDiv.html(form);
    $(boton).text(originalText).prop('disabled', false);
}

function mostrarObtenerUsuariosEnCard(resultDiv, boton, originalText) {
    $.ajax({
        type:'GET',
        url:'/obtenerUsuarios',
        success:function(data){
            let usuarios = '<div class="border-top pt-3"><small class="text-muted">Usuarios registrados:</small><div class="mt-2">';
            const userList = Object.keys(data);
            if(userList.length === 0) {
                usuarios += '<span class="badge badge-light">No hay usuarios</span>';
            } else {
                userList.forEach(nick => {
                    usuarios += `<span class="badge badge-secondary mr-1 mb-1">${nick}</span>`;
                });
            }
            usuarios += '</div></div>';
            resultDiv.html(usuarios);
            $(boton).text(originalText).prop('disabled', false);
        },
        error:function(){
            resultDiv.html('<div class="border-top pt-3"><small class="text-danger">Error al obtener usuarios</small></div>');
            $(boton).text(originalText).prop('disabled', false);
        }
    });
}

function mostrarNumeroUsuariosEnCard(resultDiv, boton, originalText) {
    $.ajax({
        type:'GET',
        url:'/numeroUsuarios',
        success:function(data){
            resultDiv.html(`
                <div class="border-top pt-3">
                    <div class="text-center">
                        <h4 class="text-dark mb-0">${data.num}</h4>
                        <small class="text-muted">usuarios registrados</small>
                    </div>
                </div>
            `);
            $(boton).text(originalText).prop('disabled', false);
        },
        error:function(){
            resultDiv.html('<div class="border-top pt-3"><small class="text-danger">Error al contar usuarios</small></div>');
            $(boton).text(originalText).prop('disabled', false);
        }
    });
}

function mostrarUsuarioActivoEnCard(resultDiv, boton, originalText) {
    const form = `
        <div class="border-top pt-3">
            <div class="form-group mb-2">
                <input type="text" class="form-control form-control-sm" id="nickVerificar" placeholder="Ingrese el nick a verificar">
            </div>
            <button class="btn btn-dark btn-sm btn-block" onclick="ejecutarVerificarUsuario()">Verificar</button>
            <div id="resultadoVerificar" class="mt-2"></div>
        </div>
    `;
    resultDiv.html(form);
    $(boton).text(originalText).prop('disabled', false);
}

function mostrarEliminarUsuarioEnCard(resultDiv, boton, originalText) {
    const form = `
        <div class="border-top pt-3">
            <div class="form-group mb-2">
                <input type="text" class="form-control form-control-sm" id="nickEliminar" placeholder="Ingrese el nick a eliminar">
            </div>
            <button class="btn btn-outline-danger btn-sm btn-block" onclick="ejecutarEliminarUsuario()">Eliminar</button>
            <div id="resultadoEliminar" class="mt-2"></div>
        </div>
    `;
    resultDiv.html(form);
    $(boton).text(originalText).prop('disabled', false);
}

// Funciones de ejecución
function ejecutarAgregarUsuario() {
    const nick = $('#nickAgregar').val();
    if(nick) {
        rest.agregarUsuario(nick);
        $('#nickAgregar').val('');
        setTimeout(() => {
            $('#result-agregarUsuario').html('<div class="border-top pt-3"><small class="text-success">Usuario agregado correctamente</small></div>');
        }, 500);
    }
}

function ejecutarVerificarUsuario() {
    const nick = $('#nickVerificar').val();
    if(nick) {
        $.ajax({
            type:'GET',
            url:'/usuarioActivo/'+nick,
            success:function(data){
                const estado = data.activo ? 
                    '<span class="badge badge-success">Activo</span>' : 
                    '<span class="badge badge-warning">No activo</span>';
                $('#resultadoVerificar').html(estado);
            }
        });
    }
}

function ejecutarEliminarUsuario() {
    const nick = $('#nickEliminar').val();
    if(nick) {
        $.ajax({
            type:'GET',
            url:'/eliminarUsuario/'+nick,
            success:function(data){
                const mensaje = data.nick !== -1 ? 
                    '<small class="text-success">Usuario eliminado</small>' : 
                    '<small class="text-warning">Usuario no encontrado</small>';
                $('#resultadoEliminar').html(mensaje);
                $('#nickEliminar').val('');
            }
        });
    }
}
</script>

<!-- Incluir modal para elegir nick de Google -->
<div id="modalNickGoogleContainer"></div>
<script>
$(document).ready(function(){
  // Cargar modal de nick para Google
  $('#modalNickGoogleContainer').load('modalNick.html', function(){
    // Configurar evento del botón
    $('#btnGuardarNickGoogle').on('click', function(){
      let nick = $('#nickGoogle').val().trim();
      
      // Validar nick
      const nickRegex = /^[a-zA-Z0-9_]{3,20}$/;
      if (!nickRegex.test(nick)) {
        $('#mensajeNickGoogle').removeClass('alert-success').addClass('alert-danger')
          .text('El nick debe tener entre 3 y 20 caracteres (solo letras, números y guiones bajos)')
          .show();
        return;
      }
      
      // Enviar nick al servidor
      $.ajax({
        type: 'POST',
        url: '/guardarNickGoogle',
        data: JSON.stringify({nick: nick}),
        contentType: 'application/json',
        success: function(data){
          if (data.success) {
            $('#modalNickGoogle').modal('hide');
            cw.agregarUsuario(data.nick);
            location.href = '/';
          } else {
            let mensaje = 'Error al guardar el nick';
            if (data.error === 'nick') {
              mensaje = 'Este nick ya está en uso. Por favor, elige otro.';
            }
            $('#mensajeNickGoogle').removeClass('alert-success').addClass('alert-danger')
              .text(mensaje).show();
          }
        },
        error: function(){
          $('#mensajeNickGoogle').removeClass('alert-success').addClass('alert-danger')
            .text('Error al conectar con el servidor').show();
        }
      });
    });
  });
});
</script>

</body>
</html>